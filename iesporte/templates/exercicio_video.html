<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ video.nome }} - IEsporte</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Video.js para player com legendas -->
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
</head>
<body class="bg-gray-50">
    <div class="max-w-6xl mx-auto p-6">
        <h1 class="text-3xl font-bold text-indigo-700 mb-4">{{ video.nome }}</h1>

        <!-- Player de v√≠deo com legendas -->
        <div class="bg-white p-4 rounded-lg shadow-lg mb-6">
            <video id="video-player" class="video-js vjs-default-skin vjs-big-play-centered" 
                   controls preload="auto" width="100%" height="500"
                   aria-label="Player de v√≠deo com legendas dispon√≠veis">
                <source src="{{ video.video_url }}" type="video/mp4">
                
                <!-- Legendas (tracks) -->
                {% for legenda in video.legendas.all %}
                    <track kind="captions" src="{{ legenda.arquivo_vtt.url }}" 
                           srclang="{{ legenda.idioma }}" 
                           label="{% if legenda.idioma == 'pt-br' %}Portugu√™s{% else %}Ingl√™s{% endif %}"
                           {% if forloop.first %}default{% endif %}>
                {% endfor %}
                
                Seu navegador n√£o suporta v√≠deos HTML5.
            </video>
        </div>

        <!-- Descri√ß√£o Visual para Surdos -->
        {% if video.descricao_audio %}
            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded mb-6">
                <h2 class="text-lg font-semibold text-blue-800 mb-2">üìù Descri√ß√£o Visual do Exerc√≠cio</h2>
                <p class="text-gray-700 leading-relaxed">{{ video.descricao_audio.descricao_visual }}</p>
            </div>
        {% endif %}

        <!-- Transcri√ß√£o Completa -->
        {% if video.legendas.first %}
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-xl font-bold text-gray-800 mb-4">üìÑ Transcri√ß√£o Completa</h2>
                <div class="bg-gray-50 p-4 rounded border-l-4 border-indigo-500">
                    <p class="text-gray-700 leading-relaxed whitespace-pre-wrap">
                        {{ video.legendas.first.transcricao_completa }}
                    </p>
                </div>
            </div>
        {% endif %}
    </div>

    <!-- Script do Video.js -->
    <script src="https://vjs.zencdn.net/7.20.3/video.js"></script>
    <script>
        // Inicializar player
        const player = videojs('video-player', {
            controls: true,
            autoplay: false,
            preload: 'auto',
            fluid: true,
            textTrackSettings: true  // Permite customizar legenda
        });

        // Notifica√ß√£o visual quando legenda est√° ativa
        player.on('captionstrackchange', function() {
            console.log('Legenda ativada - modo inclusivo para surdos');
        });
    </script>
</body>
</html>
